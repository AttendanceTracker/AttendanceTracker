@{
    ViewBag.PageName = "QR Codes";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
    <link href="~/Content/Home/QRCodes.css" rel="stylesheet" />
}

<script src="~/Scripts/WebserviceUtil.js"></script>
<script src="~/Scripts/CookieUtils.js"></script>
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/QRCodes.js"></script>

@foreach (var c in Model.ClassData)
{
    foreach (var qrCode in Model.QRCodes)
    {
        <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--4-col-desktop">
            <div class="mdl-card__title mdl-card--expand mdl-color--primary">
                <h2 class="mdl-card__title-text mdl-color-text--white">@c.Name</h2>
            </div>
            <div class="mdl-card__subtitle-text mdl-cell mdl-cell--12-col">
                Starts Today, 12:00 PM
            </div>
            <div class="mdl-card__subtitle-text mdl-cell mdl-cell--12-col">
                Expires Today, 1:50 PM
            </div>
            <div class="QR-container mdl-card__actions mdl-card--border">
                <img id="@string.Format("qr-image{0}",qrCode)" class="mdl-color-text--accent mdl-cell mdl-cell--12-col" alt=''>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <a href="#" class="mdl-color-text--accent mdl-button mdl-js-button mdl-js-ripple-effect">Download</a>
                <a href="#" class="mdl-color-text--accent mdl-button mdl-js-button mdl-js-ripple-effect">Edit</a>
            </div>
        </div>
        <script>
            $(document).ready(function () {
                console.log("hello");
                getQRCode(@qrCode, function (data) {
                    $("@string.Format("#qr-image{0}", qrCode)").attr("src", "data:image/bmp;base64," + base64Encode(data));
                });
            });
        </script>
    }
}

<button id="add-qr-button" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored">
    <i class="material-icons">add</i>
</button>

